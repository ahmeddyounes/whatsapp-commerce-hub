# M03-04 â€” Natural Language Intent Classifier

Create NLP-based intent classification for free-text messages. Create class WCH_Intent_Classifier. Method classify($text, $context): Return WCH_Intent object with intent, confidence (0-1), entities array. WCH_Intent properties: intent_name (string from enum), confidence (float), entities (array of {type, value, position}). Implement rule-based classifier as primary: Define patterns for each intent using regex and keyword matching. GREETING: /^(hi|hello|hey|good\s*(morning|afternoon|evening))/i. BROWSE: /(show|browse|see|view).*(products?|catalog|items?|collection)/i. SEARCH: /(search|find|looking for|want|need)\s+(.+)/i - capture search term. VIEW_CART: /(my )?(cart|basket|bag)/i. CHECKOUT: /(checkout|buy|purchase|pay|order)/i. ORDER_STATUS: /(order|track|where).*(status|order|package|delivery)/i - extract order number if present. CANCEL: /(cancel|remove|delete)/i. HELP: /(help|support|assist|human|agent|person)/i. Extract entities: PRODUCT_NAME from search queries, QUANTITY (numbers before/after quantity words), ORDER_NUMBER (#\d{4,} pattern), PHONE, EMAIL, ADDRESS (heuristic). Optional AI-enhanced classification for ambiguous cases: If rule-based confidence < 0.7 and AI enabled, call OpenAI with context to classify. Cache classifications with text hash key for 1 hour. Add filter 'wch_custom_intents' to register business-specific intents. Log all classifications for training data collection. Acceptance criteria: Common intents classified >90% accuracy, entities extracted correctly, fallback to AI works, classification <100ms for rules, custom intents supportable.
