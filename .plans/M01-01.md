# M01-01 â€” WhatsApp Cloud API Client

Create HTTP client for WhatsApp Business Cloud API. Create class WCH_WhatsApp_API_Client with constructor accepting config array (phone_number_id, access_token, api_version). Private method request($method, $endpoint, $body) using wp_remote_request with: base URL 'https://graph.facebook.com/{api_version}/', headers (Authorization: Bearer {token}, Content-Type: application/json), timeout 30 seconds, sslverify true. Implement retry logic: 3 attempts with exponential backoff for 5xx errors and rate limit (429) responses. Parse response JSON and throw WCH_API_Exception on errors with Graph API error code and message. Public methods: send_text_message($to, $text, $preview_url), send_interactive_list($to, $header, $body, $footer, $button_text, $sections), send_interactive_buttons($to, $header, $body, $footer, $buttons), send_template($to, $template_name, $language_code, $components), send_image($to, $image_url_or_id, $caption), send_document($to, $document_url_or_id, $filename, $caption), send_product_message($to, $catalog_id, $product_retailer_id), send_product_list($to, $catalog_id, $header, $body, $sections), mark_as_read($message_id), get_media_url($media_id), upload_media($file_path, $mime_type), get_business_profile(), update_business_profile($data). All send methods return array with 'message_id' and 'status'. Phone number validation: must be E.164 format. Log all API requests and responses at debug level. Acceptance criteria: All message types send successfully, rate limits handled gracefully, errors throw typed exceptions, media upload/download works, API responses parsed correctly.
