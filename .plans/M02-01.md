# M02-01 â€” WooCommerce Product Sync Service

Create bidirectional product synchronization between WooCommerce and WhatsApp Catalog. Create class WCH_Product_Sync_Service. Method sync_product_to_whatsapp($product_id): Get WC_Product, validate (must be published, in-stock if setting enabled, in allowed product list). Map WC product to WhatsApp catalog format: retailer_id = product_id, name (max 200 chars), description (max 9999 chars), price (cents integer), currency, url (product permalink), image_url (main image), availability (in_stock/out_of_stock), category, brand. Handle variable products: sync each variation as separate item with parent reference. Call WhatsApp Catalog API POST /{catalog_id}/products. Store wa_catalog_item_id in product meta '_wch_catalog_id'. Method sync_all_products(): Get products based on settings (all or specific IDs), batch process 50 at a time using WCH_Queue. Method delete_from_catalog($product_id): Remove from WhatsApp catalog if exists. Method handle_product_update($product_id): Hook on 'woocommerce_update_product', check if product changed (title, price, stock, image), queue sync if changed. Method handle_product_delete($product_id): Hook on 'before_delete_post' for product type, remove from catalog. Create sync status tracking: store last_synced timestamp and sync_status in product meta. Admin column in Products list showing sync status icon. Batch actions: 'Sync to WhatsApp', 'Remove from WhatsApp'. Acceptance criteria: Products sync automatically on change, deletions reflected in catalog, variable products handled correctly, sync status visible in admin, bulk sync works without timeout.
