# M00-05 â€” Logging & Error Handling System

Create comprehensive logging system for debugging and audit trails. Create class WCH_Logger with methods: debug($message, $context), info($message, $context), warning($message, $context), error($message, $context), critical($message, $context). Parameters: $message string, $context array with optional keys (conversation_id, customer_phone, order_id, exception). Log storage: Write to custom log file in wp-content/uploads/wch-logs/wch-{date}.log. Rotate logs daily, keep 30 days. Also write errors to standard WooCommerce logger WC_Logger with source 'whatsapp-commerce-hub'. Log format: [TIMESTAMP] [LEVEL] [REQUEST_ID] Message | Context JSON. Generate unique REQUEST_ID per request stored in static variable. Create WCH_Exception extends Exception with additional properties: error_code (string), http_status (int), context (array). Create error handler class WCH_Error_Handler registered on init hook with methods: handle_exception(Throwable), handle_error(errno, errstr, errfile, errline), handle_shutdown(). Convert errors to exceptions in development mode (WP_DEBUG true). Sanitize sensitive data (access tokens, passwords) from logs using regex patterns. Add admin page under WooCommerce > Status > Logs to view WCH logs with filtering by level and date. Acceptance criteria: All plugin operations logged appropriately, sensitive data never appears in logs, logs viewable from admin, old logs auto-deleted, exceptions include stack traces in debug mode.
