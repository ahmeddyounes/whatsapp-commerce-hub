# M00-03 â€” Settings Framework & Options Management

Create centralized settings management system. Create class WCH_Settings with methods: get($key, $default), set($key, $value), get_all(), delete($key), get_section($section). Store all settings in single wp_option 'wch_settings' as serialized array for atomic updates. Setting sections and keys: 'api' section (whatsapp_phone_number_id, whatsapp_business_account_id, access_token [encrypted], webhook_verify_token, api_version DEFAULT 'v18.0'). 'general' section (enable_bot BOOL, business_name, welcome_message, fallback_message, operating_hours JSON, timezone). 'catalog' section (sync_enabled BOOL, sync_products ARRAY of product IDs or 'all', include_out_of_stock BOOL, price_format, currency_symbol). 'checkout' section (enabled_payment_methods ARRAY, cod_enabled BOOL, cod_extra_charge FLOAT, min_order_amount FLOAT, max_order_amount FLOAT, require_phone_verification BOOL). 'notifications' section (order_confirmation BOOL, order_status_updates BOOL, shipping_updates BOOL, abandoned_cart_reminder BOOL, abandoned_cart_delay_hours INT). 'ai' section (enable_ai BOOL, openai_api_key [encrypted], ai_model DEFAULT 'gpt-4', ai_temperature FLOAT, ai_max_tokens INT, ai_system_prompt TEXT). Create WCH_Encryption helper class using OpenSSL with wp_salt('auth') as key for encrypting sensitive fields. Provide filter 'wch_settings_defaults' for default values. Acceptance criteria: Settings persist across requests, encrypted fields cannot be read directly from database, get() returns defaults for unset keys, settings validate types on set().
