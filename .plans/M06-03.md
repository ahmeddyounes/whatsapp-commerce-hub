# M06-03 â€” Customer Re-engagement Campaigns

Create automated re-engagement for inactive customers. Create class WCH_Reengagement_Service. Define inactive customer: Has made purchase, no orders in X days (configurable, default 60 days), opted-in to marketing. Scheduled task: Run daily, identify newly inactive customers (crossed threshold today). Re-engagement triggers: Time-based inactivity, Browse abandonment (viewed products but didn't add to cart - requires tracking), Wishlist reminders (if wishlist plugin integrated), Back-in-stock notifications, Price drop alerts on viewed products. Method identify_inactive_customers(): Query WC orders joined with WCH profiles, find customers with last_order_date < (now - threshold), exclude recently messaged (within 7 days), return list with customer data. Method send_reengagement($customer, $campaign_type): Select appropriate template, personalize with: last purchased product, recommended products based on history, exclusive offer if enabled, send via WCH_WhatsApp_API_Client. Campaign types and templates: 'we_miss_you' - generic reengagement, 'new_arrivals' - products added since last visit, 'back_in_stock' - previously viewed OOS items now available, 'price_drop' - viewed products now on sale, 'loyalty_reward' - discount based on lifetime value. Back-in-stock notification system: Track product views in wch_product_views table (customer_phone, product_id, viewed_at), when product stock changes from 0 to >0, query interested customers, queue notifications. Price drop tracking: Store viewed product prices, compare on price changes, notify if price dropped >10%. Frequency capping: Max 1 reengagement message per customer per 7 days, max 4 per month. Analytics: Track sent, opened, converted for each campaign type. Acceptance criteria: Inactive customers identified correctly, appropriate campaigns sent, frequency caps enforced, back-in-stock and price drop triggers work, conversions tracked.
